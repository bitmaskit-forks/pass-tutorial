# A password generator

Create a file named `pass` and type the following code into it.

{{correct-horse-battery-staple}}

To run this program, you need to make it e**x**ecutable using the command
`chmod +x pass`. Then you can run it by typing `./pass` and pressing
<kbd>Enter</kbd>.

It prints out a password when you run it. It prints out the same password every
time, but we'll fix that soon enough.

The first line (`#!/usr/bin/env bash`) is called a
[shebang](https://en.wikipedia.org/wiki/Shebang_(Unix)) line. (`#` is a hash
character, and `!` is a bang character, so together they form a hash-bang, or
shebang for short.) The shebang line allows you to run scripts the same way you
run binaries, so you can type `./pass` instead of `bash pass`. When the OS
goes to execute a file that begins with `#!`, it runs the program that comes
after the `#!` instead, and passes the file to that program as an argument. So
if the `pass` script began with `#!/bin/bash`, it would be executed using
`/bin/bash pass`.

However, the `bash` program might not be located at `/bin/bash` on all systems.
To make `pass` more portable, the `env` program is used. `env` is a program
that runs the given command, optionally in a modified environment. It is used
in shebang lines because it runs commands similar to how commands are run on
the shell: it looks in your `$PATH` to locate the command you gave. So with a
shebang line of `#!/usr/bin/env bash`, the `bash` command will be located
properly, wherever it may be on your system.

The reason you can't use something like `#!bash`, and expect it to use `$PATH`
to find `bash` like a shell command would, is that shebang scripts are
[handled by the OS](https://lwn.net/Articles/630727/) at a very
[low level](http://lxr.free-electrons.com/source/fs/binfmt_script.c?v=3.18).

`bash` stands for Bourne-again shell, which was written to replace the [Bourne
shell](https://en.wikipedia.org/wiki/Bourne_shell) (`sh`). `bash` is very
widely available, and is the default shell on most Unix systems.

So that's line 1. Moving on to line 3, we have an `echo` command. `echo` is a
program that just prints out the command line arguments it is given. We give it
a quoted argument. The shell
[removes the quotes](https://www.gnu.org/software/bash/manual/html_node/Quote-Removal.html)
before passing the argument to `echo`, and `echo` prints the password to the
standard output.

{{variable}}

setting variables, getting variables

{{urandom}}

read, redirection, fifo redirection, LC_ALL, tr, /dev/urandom

{{env-variables}}

all caps, setting env variables, string interpolation, quoting, default values

{{function}}

functions, function calls, local variables

{{command}}

if-else, [[ vs. [, == vs. =, more about quotes, command line arguments

{{version}}

elif, || vs. -o, heredocs, tabs in heredocs, cat

{{case}}

case statements

{{help}}

$0, echo with no arguments, interpolation in heredoc

{{program-name}}

`##` expansion

{{exit-success}}

exit, exit codes, why we're forcing a successful exit status

{{generate-length}}

function arguments

{{pass-length-usage}}

.

{{arguments}}

$@, shift

{{die}}

redirection to stderr, $@, failure exit status

{{validate-length}}

not operator, regex operator, regex, `[[ ... ]] &&` idiom

{{validate-pass}}

string length expansion, arithmetic operators, `[[ ... ]] ||` idiom

